tasks:
  default:
    build:
      trigger:
        - test
      pre_cmd:
        - echo "Pre command"
        - .buildkite/build_cache/setup_ci_build_cache.sh
      bazel_flags:
        - "--keep_going"
      bazel_cmd:
        - "//..."
      post_cmd:
        - echo "Post command"
    test:
      bazel_flags:
        - "--keep_going"
      bazel_cmd:
        - "//..."
  windows10:
    build:
      disable: true
      trigger:
        - test
      bazel_flags:
        - "--keep_going"
      pre_cmd:
        - dir
        - bash -c ".buildkite/build_cache/setup_ci_build_cache.sh"
      bazel_cmd:
        - "//..."
      post_cmd:
        - dir
    test:
      disable: true
      bazel_flags:
        - "--keep_going"
      bazel_cmd:
        - "//..."
